(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{20:function(e,t,n){e.exports=n(47)},25:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(15),i=n.n(c),s=(n(25),n(3)),p=n.n(s),l=n(4),u=n(5),m=n(19),d=n(17),f=n.n(d),h=n(18),x=n.n(h);n(46);!function(e){e[e.ready=0]="ready",e[e.uploading=1]="uploading",e[e.res_empty=2]="res_empty",e[e.res_ok=3]="res_ok",e[e.res_err=4]="res_err",e[e.img_err=5]="img_err"}(a||(a={}));var w=function(e){var t=e.text,n=e.x,a=e.y,r=e.w;e.h;return o.a.createElement("div",{className:"rect-text",style:{left:n+"px",top:a-20+"px",width:r+"px",height:"20px"}},t)},v=function(e){e.text;var t=e.x,n=e.y,a=e.w,r=e.h;return o.a.createElement("div",{className:"rect",style:{left:t+"px",top:n+"px",width:a+"px",height:r+"px"}})};var g=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(a.ready),s=Object(u.a)(i,2),d=s[0],h=s[1],g=Object(r.useState)([]),y=Object(u.a)(g,2),E=y[0],b=y[1],k=function(){var e=Object(l.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=Object(l.a)(p.a.mark((function e(t){var n,r,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!t.type.includes("image")){e.next=16;break}return h(a.uploading),(n=new FileReader).onload=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.result+"",c(t);case 2:case"end":return e.stop()}}),e)}))),n.readAsDataURL(t),(r=new FormData).append("file",t),console.log(r),e.next=11,x.a.post("/api/upload",r);case 11:o=e.sent,i=o.data,console.log(i),0==i.length?h(a.res_ok):h(a.res_empty),b(i);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement(m.a,{onDrop:k},(function(e){var t=e.getRootProps;e.getInputProps;return o.a.createElement("div",t(),o.a.createElement("div",{className:"img-pan"},o.a.createElement("img",{src:n}),E.map((function(e,t){return o.a.createElement("div",{key:t},o.a.createElement(v,{x:e.position.x,y:e.position.y,w:e.position.w,h:e.position.h,text:e.text}),o.a.createElement(w,{x:e.position.x,y:e.position.y,w:e.position.w,h:e.position.h,text:e.text}))}))),""==n&&o.a.createElement("p",null,"\u8981\u6b7b\u52b2\u513f\u7684\u628a\u56fe\u7247\u62d6\u62fd\u5230\u8fd9\u91cc"))})),d==a.uploading&&o.a.createElement(f.a,{type:"bars",color:"#fff"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.fe9d004c.chunk.js.map